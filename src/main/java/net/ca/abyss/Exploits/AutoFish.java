package net.ca.abyss.Exploits;

import net.ca.abyss.EvilMod;
import net.minecraft.client.MinecraftClient;
import net.minecraft.entity.projectile.FishingBobberEntity;
import net.minecraft.util.ActionResult;
import net.minecraft.util.Hand;

import static net.ca.abyss.Exploits.ExploitVars.*;

public class AutoFish {

    public void autoFish(MinecraftClient client){
        if(hasUserEnabledFishing){
            if(isFishing){
                //the bobber is out, wait for a catch in our FishingBobberEntityMixin
            }else{
                Hand hand = Hand.MAIN_HAND;
                ActionResult actionResult = client.interactionManager.interactItem(client.player, hand);
                if (actionResult.isAccepted()) {
                    if (actionResult.shouldSwingHand()) {
                        client.player.swingHand(hand);
                    }
                    client.gameRenderer.firstPersonRenderer.resetEquipProgress(hand);
                    isFishing = true;
                }
            }

        }
    }

    public void useRod(MinecraftClient client){
        try{
            var player = client.player;
            FishingBobberEntity bobber = player.fishHook;
            if(client.player != null && client.world != null ) {
                Hand hand = Hand.MAIN_HAND;
                ActionResult actionResult = client.interactionManager.interactItem(client.player, hand);
                if (actionResult.isAccepted()) {
                    if (actionResult.shouldSwingHand()) {
                        client.player.swingHand(hand);
                    }
                    client.gameRenderer.firstPersonRenderer.resetEquipProgress(hand);
                }

            }
        }catch (Exception e){
            EvilMod.LOGGER.error(e.toString());
            EvilMod.LOGGER.error(e.getMessage());
        }

    }
}
