package net.ca.abyss.Exploits;

import net.ca.abyss.EvilMod;
import net.ca.abyss.util.NetworkUtil;
import net.minecraft.client.MinecraftClient;
import net.minecraft.entity.Entity;
import net.minecraft.network.packet.c2s.play.PlayerMoveC2SPacket;
import net.minecraft.util.math.Vec3d;

public class Fly {
    public void vehicleFly(MinecraftClient client){
        if(client.player != null && client.player.hasVehicle()){
            Entity vehicle = client.player.getVehicle();
            Vec3d velocity = vehicle.getVelocity();
            double motionY = client.options.jumpKey.isPressed() ? 0.5 : 0;
            vehicle.setVelocity(new Vec3d(velocity.x,motionY, velocity.z));
        }
    }
    public boolean antiFly(MinecraftClient client){
        ExploitVars.flyCounter++;
        if(ExploitVars.flyCounter >=40){
            ExploitVars.flyCounter = 0;
            Vec3d velocity = client.player.getVelocity();
            double motionY = -0.05;
            client.player.setVelocity(new Vec3d(velocity.x,motionY, velocity.z));
            return true;
        }
        return false;
    }
    public void fly(MinecraftClient client){
        if(client.player != null){
            if(client.options.jumpKey.isPressed()){
                ExploitVars.flyEnabled = true;
            }else if(client.options.sprintKey.isPressed()){
                ExploitVars.flyEnabled = false;
            }
            if(ExploitVars.flyEnabled){
                if(antiFly(client)){}
                else{
                    Vec3d velocity = client.player.getVelocity();
                    double motionY = 0;
                    if(client.options.jumpKey.isPressed()){
                        motionY = 0.5;
                    }else if(client.options.sneakKey.isPressed()){
                        motionY = -0.5;
                    }
                    client.player.setMovementSpeed(20);
                    client.player.setVelocity(new Vec3d(velocity.x,motionY, velocity.z));
                }

            }
        }
    }



}
