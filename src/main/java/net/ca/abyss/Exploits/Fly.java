package net.ca.abyss.Exploits;

import net.ca.abyss.util.NetworkUtil;
import net.minecraft.client.MinecraftClient;
import net.minecraft.entity.Entity;
import net.minecraft.network.packet.c2s.play.PlayerMoveC2SPacket;
import net.minecraft.util.math.Vec3d;

public class Fly {
    public void vehicleFly(MinecraftClient client){
        if(client.player != null && client.player.hasVehicle()){
            Entity vehicle = client.player.getVehicle();
            Vec3d velocity = vehicle.getVelocity();
            double motionY = client.options.jumpKey.isPressed() ? 0.5 : 0;
            vehicle.setVelocity(new Vec3d(velocity.x,motionY, velocity.z));
        }
    }

    public void fly(MinecraftClient client){
        if(client.player != null){
            Vec3d velocity = client.player.getVelocity();
            double motionY = client.options.jumpKey.isPressed() ? 0.5 : 0;
            client.player.setVelocity(new Vec3d(velocity.x,motionY, velocity.z));
        }
    }
    public void sendFlyPacket(){
        var client = MinecraftClient.getInstance();
        var x = client.player.getX();
        var y = client.player.getY();
        var z = client.player.getZ();
        NetworkUtil.sendPacket(new PlayerMoveC2SPacket.PositionAndOnGround(x,y ,z,false));

    }

}
