package net.ca.abyss.Exploits;

import net.ca.abyss.EvilMod;
import net.minecraft.client.MinecraftClient;
import net.minecraft.entity.Entity;
import net.minecraft.util.math.Vec3d;

import static net.ca.abyss.Exploits.ExploitVars.flyEnabled;
import static net.ca.abyss.Exploits.ExploitVars.hasUserEnabledFly;

public class Fly {
    public void vehicleFly(MinecraftClient client){
        if(client.player != null && client.player.hasVehicle()){
            Entity vehicle = client.player.getVehicle();
            Vec3d velocity = vehicle.getVelocity();
            double motionY = client.options.jumpKey.isPressed() ? 0.5 : 0;
            vehicle.setVelocity(new Vec3d(velocity.x,motionY, velocity.z));
        }
    }
    public boolean antiFly(MinecraftClient client){
        ExploitVars.flyCounter++;
        if(ExploitVars.flyCounter >=40){
            ExploitVars.flyCounter = 0;
            Vec3d velocity = client.player.getVelocity();
            double motionY = -0.05;
            client.player.setVelocity(new Vec3d(velocity.x,motionY, velocity.z));
            return true;
        }
        return false;
    }

    public void flyHack(MinecraftClient client){
        try{
            if(client.player != null && hasUserEnabledFly && !antiFly(client)){
                Vec3d velocity = client.player.getVelocity();
                double motionY = 0;
                if(client.options.jumpKey.isPressed()){
                    motionY = 0.5;
                }else if(client.options.sneakKey.isPressed()){
                    motionY = -0.5;
                }
                client.player.setSprinting(true);
                client.player.setVelocity(new Vec3d(velocity.x,motionY, velocity.z));
            }
        }catch (Exception e){
            EvilMod.LOGGER.error(e.toString());
            EvilMod.LOGGER.error(e.getMessage());
        }

    }




}
